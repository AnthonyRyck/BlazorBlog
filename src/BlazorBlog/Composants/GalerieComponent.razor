@inject IGalerieViewModel ViewModel

<MudDialog>
    <DialogContent>
        <MudGrid>
            <MudItem xs="12">
                <MudPaper @ondragenter="@SetDragClass" 
                                    @ondragleave="@ClearDragClass" 
                                    @ondragend="@ClearDragClass" 
                                    Height="200px" 
                                    Outlined="true" 
                                    Class="@DragClass">
                            <InputFile OnChange="@ViewModel.OnInputFileChanged"
                                        class="absolute mud-width-full mud-height-full overflow-hidden z-2" 
                                        style="opacity:0;"
                                        multiple accept=".jpg, .jpeg, .png" />
                            
                            <MudText Typo="Typo.h6">Déposez l'image (max 3 Mo) ou cliquez</MudText>
                        </MudPaper>
            </MudItem>
             
            @foreach(var img in ViewModel.PathImages)
			{
				<MudItem>
					<MudImage src="@img" 
                                ObjectFit="ObjectFit.ScaleDown" 
                                Class="border-1-px-solid-black"
                                Width="150" Height="150"
								@onclick="(() => SubmitImage(img))" />
				</MudItem>
            }
        </MudGrid>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    MudDialogInstance MudDialog { get; set; }
	

    void SubmitImage(string img) => MudDialog.Close(DialogResult.Ok(img));
	
    void Cancel() => MudDialog.Cancel();


    private static string DefaultDragClass = "relative rounded-lg border-2 border-dashed pa-4 mt-4 mud-width-full mud-height-full";
    private string DragClass = DefaultDragClass;
    private void SetDragClass()
    {
        DragClass = $"{DefaultDragClass} mud-border-primary";
    }

    private void ClearDragClass()
    {
        DragClass = DefaultDragClass;
    }
}